'use strict';

var LTService = require('./$pg.js'), PGService = new LTService(),
PersonsQueries = require('../db/queries/persons.js'),
persons = [];

// if (persons.length === 0) {
//   PGService.getRecords({
//     text: PersonsQueries['Select all persons']
//   }).then(
//     function (resolve) {
//       for (var i = 0; i < resolve.persons.length; i++) {
//         persons.push(resolve.persons[i]);
//       }
//       return persons;
//     }, function (reject) {
//       console.error(reject.status, reject.message);
//     }
//   );
// } else {
//   return persons;
// }
//
// console.log(persons);
//
// var person = {
//   id: '871215301496'
// };

// PGService.getRecord({
//   text: PersonsQueries['Select person'],
//   values: [person.id]
// }).then(
//   function (resolve) {
//     console.log(resolve);
//   }, function (reject) {
//     console.log(reject);
//   }
// );

var person = {
  id: '871215301496',
  lastName: 'Иванов',
  firstName: 'Иван',
  middleName: 'Иванович',
  dob: '1990-01-31',
  genderID: 'M'
};

// PGService.insertRecord({
//   text: PersonsQueries['Insert person'],
//   values: [
//     person.id,
//     person.lastName,
//     person.firstName,
//     person.middleName,
//     person.dob,
//     person.genderID
//   ]
// }).then(
//   function (resolve) {
//     console.log(resolve.status, resolve.data);
//   }, function (reject) {
//     console.error(reject.status, reject.message);
//   }
// );

PGService.deleteRecord({
  text: PersonsQueries['Delete person'],
  values: [person.id]
}).then(
  function (resolve) {
    console.log(resolve.status, resolve.data);
  }, function (reject) {
    console.error(reject.status, reject.message);
  }
);
